\documentclass[10pt,letter]{article}
    % basic article document class

\usepackage{fullpage}
    % package that specifies normal margins
\usepackage{makecell}
\usepackage{setspace}
\usepackage{tabularx}


\doublespacing

\begin{document}
    % line of code telling latex that your document is beginning

\title{CS341 Shopping Cart Functional Requirements}

\author{Group 1: Sal Skare, Jack Englund, David Wissink, and John Collins}

\maketitle 
    % tells latex to follow your header (e.g., title, author) commands.

\section{About this document} This document describes the functional requirements for the 
software for an online e-commerce shopping cart software product.

\section{Functional Requirements}

\subsection{Functional Requirements For Cart}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & CT.1 \\
    \it{Name:} & GetCartPrice \\
    \it{Purpose:} & calculates the total price, taking ship and promotion codes into consideration \\
    \it{Input parameters:} & Email, PromotionCode \\
    \it{Action:} &  fetches products from the cart, applies promotion to item if valid, then adds price to running total\\
    \it{Output parameters:} & Total price  \\
    \it{Exceptions:} &  invalid promotion, empty cart\\
    \it{Remarks:} & None. \\
    \it{Cross references:} & \\
    \hline
\end{tabularx}


\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & CT.2 \\
    \it{Name:} & AddItemToCart \\
    \it{Purpose:} & Adds the item to the user's cart. \\
    \it{Input parameters:} & Access Token, Item ID, quantity \\
    \it{Action:} & Adds the number of items given by the quantity to the authenticated user's cart. \\
    \it{Output parameters:} & A success or failure message. \\
    \it{Exceptions:} & The user is not authenticated, the item does not exist, there was a database error. \\
    \it{Remarks:} & None. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & CT.3 \\
    \it{Name:} & RemoveItemFromCart \\
    \it{Purpose:} & Removes the item from the user's cart. \\
    \it{Input parameters:} & Access Token, Item ID \\
    \it{Action:} & Completely removes a product from the authenticated user's cart. \\
    \it{Output parameters:} & A success or failure message. \\
    \it{Exceptions:} & The user is not authenticated, the item does not exist, there was a database error. \\
    \it{Remarks:} & None. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & CT.4 \\
    \it{Name:} & EmptyCart \\
    \it{Purpose:} & Removes all items from a car \\
    \it{Input parameters:} & Access Token \\
    \it{Action:} & removes all items from the authenticated user's cart. \\
    \it{Output parameters:} & None. \\
    \it{Exceptions:} & The user is not authenticated, there was a database error. \\
    \it{Remarks:} & takes back to the "home" page when complete \\
    \it{Cross references:} & CT.3. \\
    \hline
\end{tabularx}


\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & CT.5 \\
    \it{Name:} & GetCart \\
    \it{Purpose:} & Returns a list of all items in a user's cart. \\
    \it{Input parameters:} & Access Token \\
    \it{Action:} & Creates a list of item IDs and quantity in an authenticated user's cart. \\
    \it{Output parameters:} & A list of Item IDs and the count for each item. \\
    \it{Exceptions:} & The user is not authenticated, there was a database error. \\
    \it{Remarks:} & None. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & CT.6 \\
    \it{Name:} & UpdateCart \\
    \it{Purpose:} & Updates the quantities of items in the cart\\
    \it{Input parameters:} & Access Token, items, corresponding quantities \\
    \it{Action:} & Updates all of the item quantities in the cart and recalculates the price. \\
    \it{Output parameters:} & A success or failure message. \\
    \it{Exceptions:} & The user is not authenticated, there was a database error, user supplied invalid quantity \\
    \it{Remarks:} & None. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\subsection{Functional Requirements For Categories}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & CG.1 \\
    \it{Name:} &  CreateCategory\\
    \it{Purpose:} & to create a new product category\\
    \it{Input parameters:} &  Name, admin user's token\\
    \it{Action:} &  authenticates admin privileges and then creates a new product category \\
    \it{Output parameters:} & A success or failure message. \\
    \it{Exceptions:} & invalid token, database error\\
    \it{Remarks:} & None. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & CG.2 \\
    \it{Name:} &  DeleteCategory\\
    \it{Purpose:} & removes an existing category\\
    \it{Input parameters:} &  Name, Admin user's token\\
    \it{Action:} &  authenticates the admin's token and then deletes the category\\
    \it{Output parameters:} & A success or failure message. \\
    \it{Exceptions:} & invalid token, database error\\
    \it{Remarks:} & None. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\subsection{Functional Requirements for Registered User Checkout}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & CO.1 \\
    \it{Name:} &  CompleteCheckout\\
    \it{Purpose:} & complete the paypal checkout process \\
    \it{Input parameters:}  Registered user token, Promotion Code\\
    \it{Action:} & Calculates total for a registered user's cart and sends request to paypal API\\
    \it{Output parameters:} & Success or failure message. \\
    \it{Exceptions:} & Cart is empty, token invalid, paypal API failure \\
    \it{Remarks:} & None\\
    \it{Cross references:} & CT.1  \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & CO.2 \\
    \it{Name:} & PayPalEdit \\
    \it{Purpose:} &  \\
    \it{Input parameters:}  \\
    \it{Action:} & \\
    \it{Output parameters:} & Success or failure message. \\
    \it{Exceptions:} &   \\
    \it{Remarks:} & \\
    \it{Cross references:} &  \\
    \hline
\end{tabularx}


\subsection{Functional Requirements For Registered User}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & U.1 \\
    \it{Name:} & CreateRegisteredUser \\
    \it{Purpose:} & To create a new user in the database. \\
    \it{Input parameters:} & Email, Password, guest ID, type(admin, customer)\\
    \it{Action:} & Creates a new entry in the database for the Registered User, hashing the password. If the guest 
    user ID is given, the guest user cart will be imported to the new user.\\
    \it{Output parameters:} & Success or failure message. \\
    \it{Exceptions:} & The user already exists, not all required fields were given, there 
    was a database error, the user does not have permission to create a new admin. \\
    \it{Remarks:} & It will be up to the front-end design to also log in the newly created 
    user if that functionality is desired. Also, to create an admin user requires an existing admin
    to make the request, including a valid Access Token\\
    \it{Cross references:} & none. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & U.2 \\
    \it{Name:} & AuthenticateUser \\
    \it{Purpose:} & Authenticates the user to the server for a set period of time. \\
    \it{Input parameters:} & Email, Password \\
    \it{Action:} & Generates an Access Token for the given user. \\
    \it{Output parameters:} & A temporary Access Token to be included in all requests that require elevated permission. \\
    \it{Exceptions:} & The user does not exist, the password did not match the user, there was a database error. \\
    \it{Remarks:} & The server will log the time the token was created and mark it as expired after a set length of time, 
    requiring the user to log in again. \\
    \it{Cross references:} & none. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & U.3 \\
    \it{Name:} & GetUser \\
    \it{Purpose:} & Returns information about the user \\
    \it{Input parameters:} & Email, Access Token \\
    \it{Action:} & Queries the database for the user, then returns all available fields. \\
    \it{Output parameters:} &  An \it{User} object, containing, email, name, type of user.\\
    \it{Exceptions:} & The user is not authenticated, there was a database error. \\
    \it{Remarks:} & None. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}


\subsection{Functional Requirements For Guest Cart}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & GC.1 \\
    \it{Name:} & AddItemToGuestCart \\
    \it{Purpose:} & Adds the item to the guest user's cart. \\
    \it{Input parameters:} & Guest user's id (A randomly generated GUID), Item ID, item quantity. \\
    \it{Action:} & Adds the number of items given by the quantity to the specified guest user's cart. If this is the first time calling this function, 
    an entry for the guest user will first be created in the database.\\
    \it{Output parameters:} & A success or failure message. \\
    \it{Exceptions:} & The item does not exist, there was a database error. \\
    \it{Remarks:} & The front-end should store the guest user ID in a browser cookie so that subsequent requests can be made. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & GC.2 \\
    \it{Name:} & RemoveItemFromGuestCart \\
    \it{Purpose:} & Removes the item from the guest user's cart. \\
    \it{Input parameters:} & Guest user's id, Item ID \\
    \it{Action:} & Removes the all of a specific item from the specified guest user's cart. \\
    \it{Output parameters:} & A success or failure message. \\
    \it{Exceptions:} & The guest does not exist, the item does not exist, there was a database error. \\
    \it{Remarks:} & None. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & GC.3 \\
    \it{Name:} & EmptyGuestCart \\
    \it{Purpose:} & Removes all items from the guest user's cart. \\
    \it{Input parameters:} & Guest user's id \\
    \it{Action:} & Removes all items from the specified guest user's cart. \\
    \it{Output parameters:} & A success or failure message. \\
    \it{Exceptions:} & The guest does not exist, the item does not exist, there was a database error. \\
    \it{Remarks:} & None. \\
    \it{Cross references:} & G.2 . \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & GC.4 \\
    \it{Name:} & GetGuestCart \\
    \it{Purpose:} & Returns a list of all items in a guest user's cart. \\
    \it{Input parameters:} & Guest user's ID \\
    \it{Action:} & Creates a list of item IDs and count in a guest user's cart. \\
    \it{Output parameters:} & A list of Item IDs and the count for each item. \\
    \it{Exceptions:} & The guest user does not exist, there was a database error. \\
    \it{Remarks:} & None 
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & GC.5 \\
    \it{Name:} & UpdateGuestCart \\
    \it{Purpose:} & Updates the quantities of items in a guest user's cart. \\
    \it{Input parameters:} & Guest user's ID, item IDs, corresponding quantities\\
    \it{Action:} & Updates the quantities of items in a guest user's cart and recalculates the price \\
    \it{Output parameters:} & None. \\
    \it{Exceptions:} & The guest user does not exist, there was a database error. \\
    \it{Remarks:} & GC.6 .
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & GC.6 \\
    \it{Name:} & GetGuestCartPrice \\
    \it{Purpose:} & calculates the total price, taking ship and promotion codes into consideration \\
    \it{Input parameters:} & Guest user's id, PromotionCode \\
    \it{Action:} &  fetches products from the cart, applies promotion to item if valid, then adds price to running total\\
    \it{Output parameters:} & Total price  \\
    \it{Exceptions:} &  invalid promotion, empty cart\\
    \it{Remarks:} & None. \\
    \it{Cross references:} & \\
    \hline
\end{tabularx}
\subsection{Functional Requirements for Guest Checkout}



\subsection{Promotions}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & P.1 \\
    \it{Name:} & CreatePromotion \\
    \it{Purpose:} & To create a promotion for users to apply to items \\
    \it{Input parameters:} & Name, Discount Code, Discount Type \it{[bogo, percent]}, Percent, End date\\
    \it{Action:} & Creates a new promotion in the database.\\
    \it{Output parameters:} & Success or Failure message. \\
    \it{Exceptions:} & The discount code already exists, invalid end date \\
    \it{Remarks:} & The promotion should only be valid until the end date, the code can only be used once per user. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & P.2 \\
    \it{Name:} & EndPromotion \\
    \it{Purpose:} & To forcefully end a promotion \\
    \it{Input parameters:} & Discount Code \it{[Identifier]}.\\
    \it{Action:} & Ends given promotion from database\\
    \it{Output parameters:} & Success or Failure message. \\
    \it{Exceptions:} & The discount code doesn't exist, the promotion is already ended \\
    \it{Remarks:} & Edit a field in the database, 'ongoing', to mark it as done. Otherwise could just change the end date to the current datetime.\\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & P.3 \\
    \it{Name:} & GetPromotion \\
    \it{Purpose:} & Returns the type & percentage of the promotion. \\
    \it{Input parameters:} & Discount Code \it{[Identifier]}.\\
    \it{Action:} & Gets a promotion based on the discount code given.\\
    \it{Output parameters:} & Success or Failure message. \\
    \it{Exceptions:} & The discount code doesn't exist, the promotion is over. \\
    \it{Remarks:} & This should be used during ApplyPromotion\\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\subsection{Product Page}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & PP.1 \\
    \it{Name:} & GetProduct \\
    \it{Purpose:} & Load all products matching given fields.\\
    \it{Input parameters:} & Search Query & Category.\\
    \it{Action:} & Returns all products matching the search query & category.\\
    \it{Output parameters:} & Success or Failure message. \\
    \it{Exceptions:} & None. \\
    \it{Remarks:} & None. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & PP.1 \\
    \it{Name:} & GetAllProduct \\
    \it{Purpose:} & Loads product information \\
    \it{Input parameters:} & Unique Product Id \\
    \it{Action:} & Returns product information like name, price, quantity, image, etc.\\
    \it{Output parameters:} & Success or Failure message. \\
    \it{Exceptions:} & Invalid PID. \\
    \it{Remarks:} & None. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & PP.2 \\
    \it{Name:} & NewProduct \\
    \it{Purpose:} & Creates a new product entry in the db.\\
    \it{Input parameters:} & Name, Category, Price, Seller, Initial Quantity, Max Quantity, Reviews, Images\\
    \it{Action:} & Creates a new entry in the product database.\\
    \it{Output parameters:} & Success or Failure message. \\
    \it{Exceptions:} & Max Quantity is less than 1, Image files are too big. \\
    \it{Remarks:} & None. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & PP.3 \\
    \it{Name:} & EditProduct \\
    \it{Purpose:} & Edits an already existing product \\
    \it{Input parameters:} & PID, Name, Category, Price, Seller, Initial Quantity, Max Quantity, Reviews, Images\\
    \it{Action:} & Edits the row of PID in the database.\\
    \it{Output parameters:} & Success or Failure message. \\
    \it{Exceptions:} & PID is not valid, then same exceptions as NewProduct \\
    \it{Remarks:} & None. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}

\begin{tabularx}{\textwidth}{l X}
    \it{Index:} & PP.4 \\
    \it{Name:} & DeleteProduct \\
    \it{Purpose:} & Removes a product from the database\\
    \it{Input parameters:} & PID\\
    \it{Action:} & Removes the row of the given PID from the database.\\
    \it{Output parameters:} & Success or Failure message. \\
    \it{Exceptions:} & PID does not exist. \\
    \it{Remarks:} & None. \\
    \it{Cross references:} & None. \\
    \hline
\end{tabularx}


\subsection{Functional Requirements for Login}


\section{Assumptions:}
\begin{enumerate}
    \item Users are identified by their email addresses.
    \item If a user wants to change their email address, they will need to create a new account.
    \item All payment info and address data will be handled through PayPal.
    \item only one promotion code can be applied to the cart
    \item Admin are also registered customers who may purchase items
    \item Admin are distinguished by their ability to access the admin pages
    \item A category is not delete unless all items of that category have also been deleted
\end{enumerate}
\end{document}
